<html>
<head><title>xkcd Subtext Options</title>
<script type="text/javascript">
// Saves options to localStorage.
	function save_options() {
		var white = document.getElementById("white");
		var mouseOver = document.getElementById("mouseOver");
		var save = document.getElementById("save");
		save.disabled = true;
		var size = document.getElementById("size");
		localStorage.clear();
		
		if(size.value.length>0)
			localStorage["size"] = size.value;
		else{
			size.style.border = "2px solid red";
			save.innerHTML = "Options not saved!";
			setTimeout(function() {
				save.innerHTML = "Save";
				size.style.border = "";
				save.disabled = false;
			}, 1500);
			return;
		}
		
		if(white.checked)
			localStorage["white"] = true;
		if(mouseOver.checked)
			localStorage["mouseOver"] = true;
		if(document.getElementById("pos").value==1)
			localStorage["top"]="1";
	

		// Update status to let user know options were saved.
		save.innerHTML = "Options Saved.";
		save.disabled = true;
		setTimeout(function() {
			save.innerHTML = "Save";
			save.disabled = false;
		}, 750);
	}

	// Restores select box state to saved value from localStorage.
	function restore_options() {
		if (localStorage["white"]) {
			document.getElementById("white").checked = true;
		}
		document.getElementById("size").value = localStorage["size"]||"16";
		if(localStorage["mouseOver"]){
			document.getElementById("mouseOver").checked = true;
		}
		document.getElementById("pos").options[(localStorage["top"]||0)].selected=true;
	}
	
	function checkSize(){
		var size = document.getElementById("size");
		if(!size.oldValue)
			size.oldValue=localStorage["size"]||"16";
		if(size.value.match("[^0-9]"))
			size.value = size.oldValue;
		else
			size.oldValue = size.value;
	}
</script>
</head>
<body onload="restore_options()" style="text-align:center;padding:20px;">
Only show on mouseOver:
<input type="checkbox" id="mouseOver"><br>
White background:
<input type="checkbox" id="white"><br>
Font size:
<input type="text" id="size" value="16" size="1" onKeyUp="checkSize()"><br>
Position:
<select id="pos">
	<option value="0">Bottom</option>
	<option value="1">Top</option>
</select>
<br>
<br>
<button onclick="save_options()" id="save">Save</button>
</body>
</html>